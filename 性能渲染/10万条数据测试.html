<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>test</title>
</head>
<body>
<button id="button">button</button><br/>
<ul id="container"></ul>
<script src="../js/jquery-1.11.2.min.js"></script>
<script>
  // 时间分片
  // let ul = document.getElementById('container');
  //
  // let total = 100000;
  //
  // let once = 20;
  //
  // let page = total/once;
  //
  // let index = 0;
  //
  // function loop(curTotal, curIndex) {
  //   if (curTotal <= 0) {
  //     return false;
  //   }
  //   let pageCount = Math.min(curTotal, once)
  //   window.requestAnimationFrame(() => {
  //     let fragment = document.createDocumentFragment();
  //     for(let i=0; i<pageCount; i++) {
  //       let li = document.createElement('li');
  //       li.innerText = curIndex +i + ' : ' + ~~(Math.random() * total)
  //       fragment.appendChild(li)
  //     }
  //     ul.appendChild(fragment)
  //     loop(curTotal-pageCount, curIndex+pageCount)
  //   }, 0)
  // }
  // loop(total, index)

  // 虚拟列表
  document.getElementById('button').addEventListener('click', function(){
    let now = Date.now()
    const total = 100000;
    let ul = document.getElementById('container')
    for (let i=0;i<total;i++) {
      let li = document.createElement('li')
      li.innerText = ~~(Math.random() * total)
      ul.appendChild(li)
    }
    console.log('js运行时间:', Date.now() - now);
    setTimeout(() => {
      console.log('总运行时间:', Date.now() - now);
    }, 0)
  })

  // JS线程进程
  // let timerCallback = function() {
  //   console.log('wait one second');
  // }
  // let httpCallback = function() {
  //   console.log('get server data success')
  // }
  // 同步任务
  // console.log('hello');
  // setTimeout(timerCallback, 1000)
  //
  // $.get('https://www.baidu.com/', httpCallback)
  //
  // console.log('world')

  // document.body.style = 'background:blue';
  // setTimeout(function(){
  //   document.body.style = 'background:black'
  // },0)

  // document.body.style = 'background:blue'
  // console.log(1);
  // Promise.resolve().then(()=>{
  //   console.log(2);
  //   document.body.style = 'background:black'
  // });
  // console.log(3);

  // setTimeout(() => {
  //   console.log(1)
  //   Promise.resolve(3).then(data => console.log(data))
  // }, 0)
  //
  // setTimeout(() => {
  //   console.log(2)
  // }, 0)

</script>
</body>
</html>
